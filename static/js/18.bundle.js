(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{407:function(e,t){},514:function(e,t,r){"use strict";r.r(t);var n,o,a,s=r(0),l=r(16),c=r(15),i=(r(51),r(13)),u=(r(37),r(22)),p=(r(41),r(12)),f=(r(34),r(7)),m=(r(60),r(14)),d=(r(407),r(19)),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),y=function(){return(y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},b=function(e,t,r,n){var a,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;0<=l;l--)(a=e[l])&&(s=(o<3?a(s):3<o?a(t,r,s):a(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},g=function(o,s,l,c){return new(l||(l=Promise))(function(e,t){function r(e){try{a(c.next(e))}catch(e){t(e)}}function n(e){try{a(c.throw(e))}catch(e){t(e)}}function a(t){t.done?e(t.value):new l(function(e){e(t.value)}).then(r,n)}a((c=c.apply(o,s||[])).next())})},w=function(r,n){var a,o,s,e,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){l.label=t[1];break}if(6===t[0]&&l.label<s[1]){l.label=s[1],s=t;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(t);break}s[2]&&l.ops.pop(),l.trys.pop();continue}t=n.call(r,l)}catch(e){t=[6,e],o=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};(a=o||(o={}))[a.success=0]="success",a[a.exists=-1]="exists";var v=function(e){return{registerResult:e.httpResponse.register}},E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={btnLoading:!1},t.handleSubmit=function(e){e.preventDefault(),t.props.form.validateFields(function(n,a){return g(t,void 0,void 0,function(){var t,r;return w(this,function(e){switch(e.label){case 0:if(n)return[3,4];e.label=1;case 1:return e.trys.push([1,,3,4]),this.setState({btnLoading:!0}),[4,m.actionsMap.register({url:"/api/user",method:"post",data:y({},a,{path:location.origin})})];case 2:switch(e.sent(),t=this.props,r=t.history,t.registerResult.status){case o.success:p.a.success("注册成功"),r.push("/login");break;case o.exists:p.a.error("用户名已存在")}return this.setState({btnLoading:!1}),[3,4];case 3:return[7];case 4:return[2]}})})})},t}return h(t,e),t.prototype.componentWillUnmount=function(){this.setState({btnLoading:!1})},t.prototype.render=function(){var e=this.props,t=e.history,r=e.form,n=this.state.btnLoading,a=r.getFieldDecorator,o=r.getFieldValue;return s.createElement(d.a,{classNames:"fade"},s.createElement(c.a,{onSubmit:this.handleSubmit,className:"register-form"},s.createElement("p",{className:"register-form-title"},"心理评测系统"),s.createElement(f.a,{className:"register-form-back",type:"arrow-left",onClick:function(){return t.push("/login")}}),s.createElement(c.a.Item,null,a("username",{rules:[{required:!0,message:"用户名不能为空"},{pattern:/^[a-zA-Z0-9]{6,20}$/,message:"用户名只包含大小写字母和数字, 长度在6-20之间"}]})(s.createElement(u.a,{autoComplete:"true",placeholder:"用户名",prefix:s.createElement(f.a,{style:{color:"rgba(0,0,0,.25)"},type:"user"})}))),s.createElement(c.a.Item,null,a("email",{rules:[{required:!0,message:"电子邮箱不能为空"},{pattern:/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/,message:"电子邮箱格式不正确"}]})(s.createElement(u.a,{autoComplete:"true",placeholder:"电子邮箱",prefix:s.createElement(f.a,{style:{color:"rgba(0,0,0,.25)"},type:"mail"})}))),s.createElement(c.a.Item,null,a("password",{rules:[{required:!0,message:"密码不能为空"},{pattern:/^(?=.*[0-9].*)(?=.*[A-Z].*)(?=.*[a-z].*).{6,20}$/,message:"密码必须包含大小写字母和数字, 长度在6-20之间"}]})(s.createElement(u.a,{autoComplete:"false",type:"password",placeholder:"密码",prefix:s.createElement(f.a,{style:{color:"rgba(0,0,0,.25)"},type:"lock"})}))),s.createElement(c.a.Item,null,a("confirm",{rules:[{required:!0,message:"密码不能为空"},{validator:function(e,t,r){t&&t!==o("password")&&r("两次密码输入不一致"),r()}}]})(s.createElement(u.a,{autoComplete:"false",type:"password",placeholder:"密码",prefix:s.createElement(f.a,{style:{color:"rgba(0,0,0,.25)"},type:"lock"})}))),s.createElement(c.a.Item,null,s.createElement(i.a,{disabled:n,loading:n,type:"primary",htmlType:"submit",className:"register-form-submit"},"注册"))))},t=b([Object(l.connect)(v)],t)}(s.Component);t.default=c.a.create()(E)}}]);